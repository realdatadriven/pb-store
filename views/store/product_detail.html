{{ define "content" }}
<div class="min-h-screen bg-white">
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
		<div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
			<!-- Product Image -->
			<div class="aspect-square bg-gray-100 rounded-lg overflow-hidden">
				{{ if .Product.Get "images" }}
				<img src="{{ .Product.Get "images" }}" 
					 alt="{{ .Product.Get "title" }}" 
					 class="w-full h-full object-cover object-center">
				{{ else }}
				<div class="w-full h-full flex items-center justify-center text-gray-400">
					<svg class="w-24 h-24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
					</svg>
				</div>
				{{ end }}
			</div>

			<!-- Product Information -->
			<div class="flex flex-col">
				<h1 class="text-3xl font-bold text-gray-900 mb-6">{{ .Product.Get "title" }}</h1>
				
				{{ if .Product.Get "description" }}
				<div class="prose prose-gray mb-8">
					<p class="text-gray-700 leading-relaxed">{{ .Product.Get "description" }}</p>
				</div>
				{{ end }}

				<!-- Pricing Information -->
				<div class="mb-8">
					<div class="text-3xl font-bold text-gray-900 mb-2">
						{{ if .Product.Get "currency" }}{{ .Product.Get "currency" }}{{ else }}€{{ end }}{{ if .Product.Get "price" }}{{ .Product.Get "price" }}{{ else }}0.00{{ end }}
					</div>
					<p class="text-sm text-gray-600">Tax included.</p>
				</div>

				<!-- Shipping Information -->
				<div class="mb-8 p-4 bg-gray-50 rounded-lg">
					<h3 class="font-medium text-gray-900 mb-2">Shipping Information</h3>
					<div class="text-sm text-gray-600 space-y-1">
						<p>Standard shipping: €4.95</p>
						<p>Express shipping: €9.95</p>
						<p>Free shipping on orders over €50</p>
					</div>
				</div>

				<!-- Quantity and Add to Cart -->
				<div class="space-y-4">
					<div>
						<label for="quantity" class="block text-sm font-medium text-gray-700 mb-2">
							Quantity
						</label>
						<div class="flex items-center space-x-3">
							<button type="button" class="w-10 h-10 rounded-md border border-gray-300 flex items-center justify-center hover:bg-gray-50" onclick="decreaseQuantity()">
								<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
								</svg>
							</button>
							<input type="number" id="quantity" name="quantity" min="1" value="1" class="w-20 text-center border border-gray-300 rounded-md py-2">
							<button type="button" class="w-10 h-10 rounded-md border border-gray-300 flex items-center justify-center hover:bg-gray-50" onclick="increaseQuantity()">
								<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
								</svg>
							</button>
						</div>
					</div>

					<div class="space-y-3">
						<button type="button" class="w-full bg-black text-white py-3 px-6 rounded-md hover:bg-gray-800 transition-colors font-medium" onclick="addToCart('{{ .Product.Id }}')">
							Add to cart
						</button>
						<button type="button" class="w-full bg-gray-100 text-gray-900 py-3 px-6 rounded-md hover:bg-gray-200 transition-colors font-medium">
							Buy it now
						</button>
					</div>
				</div>

				<!-- Share Options -->
				<div class="mt-8 pt-8 border-t border-gray-200">
					<h3 class="text-sm font-medium text-gray-900 mb-3">Share</h3>
					<div class="flex space-x-3">
						<button class="text-gray-400 hover:text-gray-600">
							<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
								<path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
							</svg>
						</button>
						<button class="text-gray-400 hover:text-gray-600">
							<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
								<path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
							</svg>
						</button>
						<button class="text-gray-400 hover:text-gray-600">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
							</svg>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
function increaseQuantity() {
	const input = document.getElementById('quantity');
	input.value = parseInt(input.value) + 1;
}

function decreaseQuantity() {
	const input = document.getElementById('quantity');
	if (parseInt(input.value) > 1) {
		input.value = parseInt(input.value) - 1;
	}
}

function addToCart(productId) {
	const quantity = parseInt(document.getElementById('quantity').value);
	
	// Get product data from the page
	const product = {
		id: '{{ .Product.Id }}',
		title: '{{ .Product.Get "title" }}',
		price: {{ if .Product.Get "price" }}{{ .Product.Get "price" }}{{ else }}0{{ end }},
		currency: '{{ if .Product.Get "currency" }}{{ .Product.Get "currency" }}{{ else }}€{{ end }}',
		image: '{{ if .Product.Get "images" }}/static/{{ .Product.Get "images" }}{{ end }}',
		slug: '{{ if .Product.Get "slug" }}{{ .Product.Get "slug" }}{{ else }}{{ .Product.Id }}{{ end }}'
	};
	
	// Get existing cart from localStorage
	let cart = JSON.parse(localStorage.getItem('cart') || '[]');
	
	// Check if product already exists in cart
	const existingIndex = cart.findIndex(item => item.id === product.id);
	
	if (existingIndex >= 0) {
		// Update quantity if product exists
		cart[existingIndex].quantity += quantity;
	} else {
		// Add new product to cart
		cart.push({
			...product,
			quantity: quantity
		});
	}
	
	// Save cart to localStorage
	localStorage.setItem('cart', JSON.stringify(cart));
	
	// Update cart count in header
	const cartCount = document.getElementById('cart-count');
	if (cartCount) {
		const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
		cartCount.textContent = totalItems;
	}
	
	// Show success message
	alert(`Added ${quantity} item(s) to cart!`);
	
	// Optional: redirect to cart page
	// window.location.href = '/cart';
}

// Update cart count on page load
document.addEventListener('DOMContentLoaded', function() {
	const cart = JSON.parse(localStorage.getItem('cart') || '[]');
	const cartCount = document.getElementById('cart-count');
	if (cartCount) {
		const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
		cartCount.textContent = totalItems;
	}
});
</script>
{{ end }}
{{ template "store" . }}

