{{ define "header" }}
<header class="bg-black text-white">
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
		<div class="flex items-center justify-between h-16">
			<!-- Logo -->
			<div class="flex-shrink-0">
				<a href="/" class="text-xl font-bold text-white hover:text-gray-300">
					{{ .Title }}
				</a>
			</div>

			<!-- Right side navigation -->
			<div class="flex items-center space-x-6">
				<!-- Search -->
				<div class="relative">
					<form action="/search" method="GET" class="flex items-center">
						<input type="text" name="q" placeholder="Search products..." 
							   class="bg-gray-800 text-white px-3 py-1 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-white focus:bg-gray-700"
							   value="{{ .SearchQuery }}">
						<button type="submit" class="ml-2 text-white hover:text-gray-300">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
							</svg>
						</button>
					</form>
				</div>

				<!-- Cart -->
				<div class="relative">
					<a href="/cart" class="text-white hover:text-gray-300 flex items-center">
						<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9m-9 0h9"></path>
						</svg>
						<span class="ml-1">Cart</span>
						<span class="ml-1 bg-white text-black text-xs rounded-full px-2 py-1" id="cart-count">0</span>
					</a>
				</div>

				<!-- Login/Account -->
				<div class="relative">
					<div id="user-menu" style="display: none;">
						<div class="flex items-center space-x-4">
							<span class="text-white text-sm" id="user-name">Welcome, User!</span>
							<button onclick="logout()" class="text-white hover:text-gray-300 text-sm">
								Logout
							</button>
						</div>
					</div>
					<div id="login-menu">
						<a href="/login" class="text-white hover:text-gray-300 flex items-center">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
							</svg>
							<span class="ml-1">Account</span>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</header>

<script>
// Check user login status and update header
function updateUserMenu() {
	const user = JSON.parse(localStorage.getItem('user') || '{}');
	const userMenu = document.getElementById('user-menu');
	const loginMenu = document.getElementById('login-menu');
	const userName = document.getElementById('user-name');
	
	if (user.loggedIn) {
		userMenu.style.display = 'block';
		loginMenu.style.display = 'none';
		userName.textContent = `Welcome, ${user.name}!`;
	} else {
		userMenu.style.display = 'none';
		loginMenu.style.display = 'block';
	}
}

function logout() {
	localStorage.removeItem('user');
	alert('Logged out successfully!');
	window.location.reload();
}

// Update cart count from localStorage
function updateCartCount() {
	const cart = JSON.parse(localStorage.getItem('cart') || '[]');
	const cartCount = document.getElementById('cart-count');
	if (cartCount) {
		const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
		cartCount.textContent = totalItems;
	}
}

// Initialize header on page load
document.addEventListener('DOMContentLoaded', function() {
	updateUserMenu();
	updateCartCount();
});
</script>
{{ end }}

