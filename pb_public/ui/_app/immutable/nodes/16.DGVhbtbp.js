import{s as Z,A as ee,d as x,B as ae,i as I,b as v,l as ne,M as se,a as h,c as y,e as A,g as R,f as T,k as P,m as L,p as oe,w as F,x as G,N as le,o as ie,D as Q,v as ce,z as fe}from"../chunks/ufOp95kZ.js";import{S as te,i as re,f as me,d as z,t as D,a as V,m as j,b as H,e as B,c as ue,g as pe}from"../chunks/DNCcOagt.js";import{g as de,a as _e}from"../chunks/CgU5AtxT.js";import{b as ge}from"../chunks/Bt-Xh7oU.js";import{i as he,g as be}from"../chunks/D3JaxPbd.js";import{p as ve}from"../chunks/BpHj9z-n.js";import{t as W}from"../chunks/DhmAwd_b.js";import{C as xe}from"../chunks/D-vWSArU.js";import{U as Y}from"../chunks/DYsVtq3u.js";import"../chunks/JGQLqEoH.js";import"../chunks/CHWgvwls.js";/* empty css                */import"../chunks/RatnibW6.js";import"../chunks/Ce6Dz44R.js";import"../chunks/DanBvOwQ.js";/* empty css                */import{P as ke}from"../chunks/CEFpR4T3.js";import{T as we}from"../chunks/BHXV1VoH.js";import{S as ye}from"../chunks/DFWCCbjV.js";import{V as Pe}from"../chunks/HG0R6N4S.js";function Ce(s){let t;return{c(){t=G("SEND OTP")},l(r){t=F(r,"SEND OTP")},m(r,e){I(r,t,e)},d(r){r&&x(t)}}}function $e(s){let t,r,e,a,n="+91",c,m,k,p,o,E="Ex. 9XXXXXXXXX",w,g,$,O,C;function q(u){s[5](u)}let S={type:"tel",label:"Mobile Number",maxlength:"10",class:"w-full",required:!0};return s[0]!==void 0&&(S.value=s[0]),m=new we({props:S}),s[4](m),ee.push(()=>me(m,"value",q)),g=new ke({props:{loading:s[2],class:"w-full",type:"submit",$$slots:{default:[Ce]},$$scope:{ctx:s}}}),{c(){t=P("form"),r=P("div"),e=P("div"),a=P("span"),a.textContent=n,c=L(),B(m.$$.fragment),p=L(),o=P("p"),o.textContent=E,w=L(),B(g.$$.fragment),this.h()},l(u){t=y(u,"FORM",{class:!0});var l=A(t);r=y(l,"DIV",{});var d=A(r);e=y(d,"DIV",{class:!0});var f=A(e);a=y(f,"SPAN",{class:!0,"data-svelte-h":!0}),R(a)!=="svelte-nvq8sg"&&(a.textContent=n),c=T(f),H(m.$$.fragment,f),f.forEach(x),p=T(d),o=y(d,"P",{class:!0,"data-svelte-h":!0}),R(o)!=="svelte-18bcaab"&&(o.textContent=E),d.forEach(x),w=T(l),H(g.$$.fragment,l),l.forEach(x),this.h()},h(){h(a,"class","text-sm"),h(e,"class","mb-1 flex items-baseline gap-1"),h(o,"class","text-sm font-light text-zinc-500"),h(t,"class","mb-5 flex flex-col gap-5")},m(u,l){I(u,t,l),v(t,r),v(r,e),v(e,a),v(e,c),j(m,e,null),v(r,p),v(r,o),v(t,w),j(g,t,null),$=!0,O||(C=ne(t,"submit",se(s[6])),O=!0)},p(u,[l]){const d={};!k&&l&1&&(k=!0,d.value=u[0],ae(()=>k=!1)),m.$set(d);const f={};l&4&&(f.loading=u[2]),l&128&&(f.$$scope={dirty:l,ctx:u}),g.$set(f)},i(u){$||(V(m.$$.fragment,u),V(g.$$.fragment,u),$=!0)},o(u){D(m.$$.fragment,u),D(g.$$.fragment,u),$=!1},d(u){u&&x(t),s[4](null),z(m),z(g),O=!1,C()}}}function Ee(s,t,r){const e=oe();let{phone:a,loading:n}=t,{ref:c=null}=t;function m(o){ee[o?"unshift":"push"](()=>{c=o,r(1,c)})}function k(o){a=o,r(0,a)}const p=()=>e("send",a);return s.$$set=o=>{"phone"in o&&r(0,a=o.phone),"loading"in o&&r(2,n=o.loading),"ref"in o&&r(1,c=o.ref)},[a,c,n,e,m,k,p]}class Oe extends te{constructor(t){super(),re(this,t,Ee,$e,Z,{phone:0,loading:2,ref:1})}}function Se(s){let t;function r(n,c){var m;return(m=n[4].data.store)!=null&&m.websiteName?Le:Te}let e=r(s),a=e(s);return{c(){t=P("h1"),a.c(),this.h()},l(n){t=y(n,"H1",{class:!0});var c=A(t);a.l(c),c.forEach(x),this.h()},h(){h(t,"class","bg-gradient-to-b from-primary-500 to-primary-700 bg-clip-text text-3xl font-extrabold text-transparent underline decoration-zinc-800")},m(n,c){I(n,t,c),a.m(t,null)},p(n,c){e===(e=r(n))&&a?a.p(n,c):(a.d(1),a=e(n),a&&(a.c(),a.m(t,null)))},d(n){n&&x(t),a.d()}}}function Ne(s){let t,r;return{c(){t=P("img"),this.h()},l(e){t=y(e,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){var e;Q(t.src,r=(e=s[4].data.store)==null?void 0:e.logo)||h(t,"src",r),h(t,"alt","logo"),h(t,"class","max-h-10 sm:max-h-16 w-40 object-contain object-center")},m(e,a){I(e,t,a)},p(e,a){var n;a&16&&!Q(t.src,r=(n=e[4].data.store)==null?void 0:n.logo)&&h(t,"src",r)},d(e){e&&x(t)}}}function Te(s){let t;return{c(){t=G("Litekart")},l(r){t=F(r,"Litekart")},m(r,e){I(r,t,e)},p:fe,d(r){r&&x(t)}}}function Le(s){var e;let t=((e=s[4].data.store)==null?void 0:e.websiteName)+"",r;return{c(){r=G(t)},l(a){r=F(a,t)},m(a,n){I(a,r,n)},p(a,n){var c;n&16&&t!==(t=((c=a[4].data.store)==null?void 0:c.websiteName)+"")&&ce(r,t)},d(a){a&&x(r)}}}function Ae(s){let t,r;return t=new Pe({props:{loading:s[1],phone:s[0],resendAfter:s[3]}}),t.$on("verifyOtp",s[12]),t.$on("resend",s[13]),t.$on("changeNumber",s[8]),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,a){j(t,e,a),r=!0},p(e,a){const n={};a&2&&(n.loading=e[1]),a&1&&(n.phone=e[0]),a&8&&(n.resendAfter=e[3]),t.$set(n)},i(e){r||(V(t.$$.fragment,e),r=!0)},o(e){D(t.$$.fragment,e),r=!1},d(e){z(t,e)}}}function Ie(s){let t,r;return t=new Oe({props:{loading:s[1],phone:s[0]}}),t.$on("send",s[11]),{c(){B(t.$$.fragment)},l(e){H(t.$$.fragment,e)},m(e,a){j(t,e,a),r=!0},p(e,a){const n={};a&2&&(n.loading=e[1]),a&1&&(n.phone=e[0]),t.$set(n)},i(e){r||(V(t.$$.fragment,e),r=!0)},o(e){D(t.$$.fragment,e),r=!1},d(e){z(t,e)}}}function Xe(s){let t,r,e,a,n,c,m="Login/Register",k,p,o,E,w,g,$,O,C,q=`By clicking send OTP you are accepting our
		<a href="/terms-conditions" aria-label="Click to visit terms &amp; conditions" target="_blank" rel="noopener noreferrer" class="whitespace-nowrap text-primary-500 hover:text-primary-700 hover:underline"><b>Terms &amp; Conditions</b></a>`,S;const u=[s[5]];let l={};for(let i=0;i<u.length;i+=1)l=le(l,u[i]);t=new ye({props:l});function d(i,_){var X;return(X=i[4].data.store)!=null&&X.logo?Ne:Se}let f=d(s),b=f(s);const U=[Ie,Ae],N=[];function J(i,_){return i[2]?1:0}return p=J(s),o=N[p]=U[p](s),{c(){B(t.$$.fragment),r=L(),e=P("div"),a=P("a"),b.c(),n=L(),c=P("h2"),c.textContent=m,k=L(),o.c(),E=L(),w=P("div"),g=P("a"),$=G("Login with Email"),O=L(),C=P("p"),C.innerHTML=q,this.h()},l(i){H(t.$$.fragment,i),r=T(i),e=y(i,"DIV",{class:!0});var _=A(e);a=y(_,"A",{href:!0,"aria-label":!0,class:!0});var X=A(a);b.l(X),X.forEach(x),n=T(_),c=y(_,"H2",{class:!0,"data-svelte-h":!0}),R(c)!=="svelte-z08shn"&&(c.textContent=m),k=T(_),o.l(_),E=T(_),w=y(_,"DIV",{class:!0});var M=A(w);g=y(M,"A",{href:!0,"aria-label":!0,class:!0});var K=A(g);$=F(K,"Login with Email"),K.forEach(x),M.forEach(x),O=T(_),C=y(_,"P",{class:!0,"data-svelte-h":!0}),R(C)!=="svelte-1jonpkh"&&(C.innerHTML=q),_.forEach(x),this.h()},h(){h(a,"href","/"),h(a,"aria-label","Go to home"),h(a,"class","mx-auto mb-8 block max-w-max"),h(c,"class","mb-8 w-full text-center text-2xl font-semibold text-primary-500"),h(g,"href",s[9]("/auth/login")),h(g,"aria-label","Click to login with email"),h(g,"class","whitespace-nowrap text-primary-500 hover:text-primary-700 hover:underline"),h(w,"class","mx-auto mb-5 flex max-w-max flex-col gap-1 text-center text-sm"),h(C,"class","text-center text-sm text-zinc-500"),h(e,"class","flex w-full max-w-md flex-col rounded-2xl border bg-white p-10 shadow-2xl")},m(i,_){j(t,i,_),I(i,r,_),I(i,e,_),v(e,a),b.m(a,null),v(e,n),v(e,c),v(e,k),N[p].m(e,null),v(e,E),v(e,w),v(w,g),v(g,$),v(e,O),v(e,C),S=!0},p(i,[_]){const X=_&32?de(u,[_e(i[5])]):{};t.$set(X),f===(f=d(i))&&b?b.p(i,_):(b.d(1),b=f(i),b&&(b.c(),b.m(a,null)));let M=p;p=J(i),p===M?N[p].p(i,_):(pe(),D(N[M],1,1,()=>{N[M]=null}),ue(),o=N[p],o?o.p(i,_):(o=N[p]=U[p](i),o.c()),V(o,1),o.m(e,E))},i(i){S||(V(t.$$.fragment,i),V(o),S=!0)},o(i){D(t.$$.fragment,i),D(o),S=!1},d(i){i&&(x(r),x(e)),z(t,i),b.d(),N[p].d()}}}function De(s,t,r){var u;let e;ie(s,ve,l=>r(4,e=l));const a=xe();let{data:n}=t;const c={title:"OTP Login",description:"OTP Login"};let m,k=!1,p=!1,o=0,E=(u=e==null?void 0:e.url)==null?void 0:u.searchParams.get("ref");async function w({detail:l}){r(0,m=l),e.url.searchParams.get("role"),e.url.searchParams.get("store");try{r(1,k=!0);const d=await Y.getOtpService({phone:m,storeId:n.storeId,origin:n.origin});r(3,o=d==null?void 0:d.timer),r(2,p=!0)}catch(d){W(d.message,"error")}finally{r(1,k=!1)}}async function g({detail:l}){try{r(1,k=!0);const d=l,f=await Y.verifyOtpService({phone:m,otp:d,storeId:n.storeId,origin:n.origin}),b={id:f._id,email:f.email,phone:f.phone,firstName:f.firstName,lastName:f.lastName,avatar:f.avatar,role:f.role,verified:f.verified,active:f.active,store:f.store};await a.set("me",b,{path:"/",maxAge:31536e3}),await he(),ge&&be(E||"/")}catch(d){W(d,"error")}finally{r(1,k=!1)}}function $(){r(0,m=""),r(2,p=!1)}function O(l){const d=e.url.searchParams.toString(),f=e.url.searchParams.get("ref");let b="";return f?b=`${l}?ref=${f}`:b=l+"?"+d,b.toString()}const C=({detail:l})=>w({detail:l}),q=({detail:l})=>g({detail:l}),S=({detail:l})=>w({detail:l});return s.$$set=l=>{"data"in l&&r(10,n=l.data)},[m,k,p,o,e,c,w,g,$,O,n,C,q,S]}class at extends te{constructor(t){super(),re(this,t,De,Xe,Z,{data:10})}}export{at as component};
