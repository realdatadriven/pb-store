import{R as ye}from"../chunks/DYsVtq3u.js";import{s as Me,N as Ve,d as _,i as V,f as $,j as fe,m as z,o as je,q as Be,v as K,b as v,a as E,c as y,e as D,w as O,k as A,x as q,E as Ae,g as De,h as ue,n as me,l as He,D as de}from"../chunks/ufOp95kZ.js";import{S as Te,i as $e,d as le,t as Y,a as F,c as oe,m as se,b as ae,e as re,g as ce}from"../chunks/DNCcOagt.js";import{e as ne}from"../chunks/DRjDb-W4.js";import{g as ze,a as Le}from"../chunks/CgU5AtxT.js";import{B as Oe}from"../chunks/DryTB8mk.js";import"../chunks/Ce6Dz44R.js";import{p as qe}from"../chunks/BpHj9z-n.js";import{t as Ce,d as pe}from"../chunks/DhmAwd_b.js";import"../chunks/D3JaxPbd.js";import"../chunks/D-vWSArU.js";import"../chunks/JGQLqEoH.js";import"../chunks/CHWgvwls.js";/* empty css                */import"../chunks/RatnibW6.js";import"../chunks/DanBvOwQ.js";/* empty css                */import{P as Ge,R as Fe}from"../chunks/BGs_SJ48.js";import{d as Ue}from"../chunks/FXM7-K9T.js";import{S as Ye}from"../chunks/DFWCCbjV.js";const Je=!1;async function Ke({params:s,parent:e,url:t}){const{slug:l}=s,{sid:a,origin:n,storeId:f}=await e();let c=[];try{c=ye.fetchProductReviews({page:(t==null?void 0:t.searchParams.get("page"))||1,slug:l,origin:n,storeId:f,server:Je,sid:a})}catch(p){console.log(p)}return{pid:l,productReviews:c}}const Pt=Object.freeze(Object.defineProperty({__proto__:null,load:Ke},Symbol.toStringTag,{value:"Module"}));function _e(s,e,t){const l=s.slice();return l[18]=e[t],l[20]=t,l}function he(s,e,t){const l=s.slice();return l[21]=e[t],l}function Qe(s){let e;return{c(){e=q("Review")},l(t){e=O(t,"Review")},m(t,l){V(t,e,l)},d(t){t&&_(e)}}}function We(s){let e;return{c(){e=q("Reviews")},l(t){e=O(t,"Reviews")},m(t,l){V(t,e,l)},d(t){t&&_(e)}}}function Xe(s){var h,g;let e,t,l=(((g=(h=s[7])==null?void 0:h.url)==null?void 0:g.searchParams.get("type"))||"")+"",a,n,f,c,p,m;function o(N,b){return N[2]>1?We:Qe}let d=o(s),r=d(s);return{c(){e=A("div"),t=A("h2"),a=q(l),n=q(" Reviews"),f=z(),c=A("p"),p=q(s[2]),m=z(),r.c(),this.h()},l(N){e=y(N,"DIV",{class:!0});var b=D(e);t=y(b,"H2",{class:!0});var u=D(t);a=O(u,l),n=O(u," Reviews"),u.forEach(_),f=$(b),c=y(b,"P",{class:!0});var i=D(c);p=O(i,s[2]),m=$(i),r.l(i),i.forEach(_),b.forEach(_),this.h()},h(){E(t,"class","max-w-[10rem] truncate font-semibold capitalize leading-4"),E(c,"class","text-xs"),E(e,"class","flex max-w-max flex-col items-start gap-1")},m(N,b){V(N,e,b),v(e,t),v(t,a),v(t,n),v(e,f),v(e,c),v(c,p),v(c,m),r.m(c,null)},p(N,b){var u,i;b&128&&l!==(l=(((i=(u=N[7])==null?void 0:u.url)==null?void 0:i.searchParams.get("type"))||"")+"")&&K(a,l),b&4&&K(p,N[2]),d!==(d=o(N))&&(r.d(1),r=d(N),r&&(r.c(),r.m(c,null)))},d(N){N&&_(e),r.d()}}}function ge(s){let e,t,l,a,n,f=s[9]==="product_review"?"Product":"Brand",c,p,m,o,d,r,h,g,N,b,u,i,M,R,L,G;function J(w,B){return w[2]>1?xe:Ze}let S=J(s),j=S(s);b=new Oe({});let C=ne(s[1]),P=[];for(let w=0;w<C.length;w+=1)P[w]=Re(_e(s,C,w));const x=w=>Y(P[w],1,1,()=>{P[w]=null});let H=s[3]&&Ie(),T=s[5]&&Se();return{c(){e=A("div"),t=A("div"),l=A("header"),a=A("h1"),n=A("span"),c=q(f),p=q(" Reviews"),m=q(`

					-

					`),o=A("p"),d=A("span"),r=q(s[2]),h=z(),g=A("span"),j.c(),N=z(),re(b.$$.fragment),u=z(),i=A("div");for(let w=0;w<P.length;w+=1)P[w].c();M=z(),R=A("div"),H&&H.c(),L=z(),T&&T.c(),this.h()},l(w){e=y(w,"DIV",{class:!0});var B=D(e);t=y(B,"DIV",{class:!0});var I=D(t);l=y(I,"HEADER",{class:!0});var U=D(l);a=y(U,"H1",{class:!0});var Q=D(a);n=y(Q,"SPAN",{class:!0});var X=D(n);c=O(X,f),p=O(X," Reviews"),X.forEach(_),m=O(Q,`

					-

					`),o=y(Q,"P",{});var W=D(o);d=y(W,"SPAN",{class:!0});var Z=D(d);r=O(Z,s[2]),Z.forEach(_),h=$(W),g=y(W,"SPAN",{});var ee=D(g);j.l(ee),ee.forEach(_),W.forEach(_),Q.forEach(_),N=$(U),ae(b.$$.fragment,U),U.forEach(_),u=$(I),i=y(I,"DIV",{});var k=D(i);for(let ie=0;ie<P.length;ie+=1)P[ie].l(k);M=$(k),R=y(k,"DIV",{class:!0});var te=D(R);H&&H.l(te),te.forEach(_),L=$(k),T&&T.l(k),k.forEach(_),I.forEach(_),B.forEach(_),this.h()},h(){E(n,"class","text-xl font-bold md:text-2xl"),E(d,"class","text-xl font-bold capitalize md:text-2xl"),E(a,"class","flex flex-wrap items-center gap-2"),E(l,"class","mb-10 hidden lg:flex items-center justify-between flex-wrap-reverse gap-2"),E(R,"class","more"),E(t,"class","container mx-auto max-w-6xl"),E(e,"class","mt-14 sm:mt-20 lg:mt-0 p-3 py-5 sm:p-10")},m(w,B){V(w,e,B),v(e,t),v(t,l),v(l,a),v(a,n),v(n,c),v(n,p),v(a,m),v(a,o),v(o,d),v(d,r),v(o,h),v(o,g),j.m(g,null),v(l,N),se(b,l,null),v(t,u),v(t,i);for(let I=0;I<P.length;I+=1)P[I]&&P[I].m(i,null);v(i,M),v(i,R),H&&H.m(R,null),v(i,L),T&&T.m(i,null),G=!0},p(w,B){if((!G||B&4)&&K(r,w[2]),S!==(S=J(w))&&(j.d(1),j=S(w),j&&(j.c(),j.m(g,null))),B&1106){C=ne(w[1]);let I;for(I=0;I<C.length;I+=1){const U=_e(w,C,I);P[I]?(P[I].p(U,B),F(P[I],1)):(P[I]=Re(U),P[I].c(),F(P[I],1),P[I].m(i,M))}for(ce(),I=C.length;I<P.length;I+=1)x(I);oe()}w[3]?H||(H=Ie(),H.c(),H.m(R,null)):H&&(H.d(1),H=null),w[5]?T||(T=Se(),T.c(),T.m(i,null)):T&&(T.d(1),T=null)},i(w){if(!G){F(b.$$.fragment,w);for(let B=0;B<C.length;B+=1)F(P[B]);G=!0}},o(w){Y(b.$$.fragment,w),P=P.filter(Boolean);for(let B=0;B<P.length;B+=1)Y(P[B]);G=!1},d(w){w&&_(e),j.d(),le(b),Ae(P,w),H&&H.d(),T&&T.d()}}}function Ze(s){let e;return{c(){e=q("Review")},l(t){e=O(t,"Review")},m(t,l){V(t,e,l)},d(t){t&&_(e)}}}function xe(s){let e;return{c(){e=q("Reviews")},l(t){e=O(t,"Reviews")},m(t,l){V(t,e,l)},d(t){t&&_(e)}}}function ve(s){let e,t,l=s[18].rating+"",a,n,f,c;return{c(){e=A("div"),t=A("span"),a=q(l),n=z(),f=me("svg"),c=me("path"),this.h()},l(p){e=y(p,"DIV",{class:!0});var m=D(e);t=y(m,"SPAN",{});var o=D(t);a=O(o,l),o.forEach(_),n=$(m),f=ue(m,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var d=D(f);c=ue(d,"path",{d:!0}),D(c).forEach(_),d.forEach(_),m.forEach(_),this.h()},h(){E(c,"d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"),E(f,"xmlns","http://www.w3.org/2000/svg"),E(f,"class","h-3 w-3"),E(f,"viewBox","0 0 20 20"),E(f,"fill","currentColor"),E(e,"class","flex max-w-max items-center gap-0.5 rounded bg-primary-500 px-1.5 py-0.5 text-xs font-semibold text-white")},m(p,m){V(p,e,m),v(e,t),v(t,a),v(e,n),v(e,f),v(f,c)},p(p,m){m&2&&l!==(l=p[18].rating+"")&&K(a,l)},d(p){p&&_(e)}}}function be(s){let e,t=s[18].message+"",l;return{c(){e=A("p"),l=q(t),this.h()},l(a){e=y(a,"P",{class:!0});var n=D(e);l=O(n,t),n.forEach(_),this.h()},h(){E(e,"class","first-letter:uppercase text-sm")},m(a,n){V(a,e,n),v(e,l)},p(a,n){n&2&&t!==(t=a[18].message+"")&&K(l,t)},d(a){a&&_(e)}}}function we(s){var d;let e,t,l,a,n,f,c=ne((d=s[18])==null?void 0:d.images),p=[];for(let r=0;r<c.length;r+=1)p[r]=ke(he(s,c,r));function m(){return s[11](s[18],s[20])}function o(){return s[12](s[20])}return l=new Fe({props:{showPhotosModal:s[4][s[20]],gallery:s[6]}}),l.$on("close",o),{c(){e=A("button");for(let r=0;r<p.length;r+=1)p[r].c();t=z(),re(l.$$.fragment),this.h()},l(r){e=y(r,"BUTTON",{type:!0,class:!0});var h=D(e);for(let g=0;g<p.length;g+=1)p[g].l(h);h.forEach(_),t=$(r),ae(l.$$.fragment,r),this.h()},h(){E(e,"type","button"),E(e,"class","flex flex-wrap gap-1")},m(r,h){V(r,e,h);for(let g=0;g<p.length;g+=1)p[g]&&p[g].m(e,null);V(r,t,h),se(l,r,h),a=!0,n||(f=He(e,"click",m),n=!0)},p(r,h){var N;if(s=r,h&2){c=ne((N=s[18])==null?void 0:N.images);let b;for(b=0;b<c.length;b+=1){const u=he(s,c,b);p[b]?p[b].p(u,h):(p[b]=ke(u),p[b].c(),p[b].m(e,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=c.length}const g={};h&16&&(g.showPhotosModal=s[4][s[20]]),h&64&&(g.gallery=s[6]),l.$set(g)},i(r){a||(F(l.$$.fragment,r),a=!0)},o(r){Y(l.$$.fragment,r),a=!1},d(r){r&&(_(e),_(t)),Ae(p,r),le(l,r),n=!1,f()}}}function ke(s){let e,t;return{c(){e=A("img"),this.h()},l(l){e=y(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){de(e.src,t=s[21])||E(e,"src",t),E(e,"alt",""),E(e,"class","h-20 w-14 rounded object-cover")},m(l,a){V(l,e,a)},p(l,a){a&2&&!de(e.src,t=l[21])&&E(e,"src",t)},d(l){l&&_(e)}}}function Pe(s){var p,m;let e,t=((p=s[18].user)==null?void 0:p.firstName)+"",l,a,n,f,c=((m=s[18].user)==null?void 0:m.lastName)&&Ee(s);return{c(){e=A("span"),l=q(t),a=z(),c&&c.c(),n=z(),f=A("span"),this.h()},l(o){e=y(o,"SPAN",{});var d=D(e);l=O(d,t),d.forEach(_),a=$(o),c&&c.l(o),n=$(o),f=y(o,"SPAN",{class:!0}),D(f).forEach(_),this.h()},h(){E(f,"class","h-2.5 border-l border-zinc-200")},m(o,d){V(o,e,d),v(e,l),V(o,a,d),c&&c.m(o,d),V(o,n,d),V(o,f,d)},p(o,d){var r,h;d&2&&t!==(t=((r=o[18].user)==null?void 0:r.firstName)+"")&&K(l,t),(h=o[18].user)!=null&&h.lastName?c?c.p(o,d):(c=Ee(o),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d(o){o&&(_(e),_(a),_(n),_(f)),c&&c.d(o)}}}function Ee(s){var a;let e,t=((a=s[18].user)==null?void 0:a.lastName)+"",l;return{c(){e=A("span"),l=q(t)},l(n){e=y(n,"SPAN",{});var f=D(e);l=O(f,t),f.forEach(_)},m(n,f){V(n,e,f),v(e,l)},p(n,f){var c;f&2&&t!==(t=((c=n[18].user)==null?void 0:c.lastName)+"")&&K(l,t)},d(n){n&&_(e)}}}function Ne(s){let e,t=pe(s[18].createdAt)+"",l;return{c(){e=A("span"),l=q(t)},l(a){e=y(a,"SPAN",{});var n=D(e);l=O(n,t),n.forEach(_)},m(a,n){V(a,e,n),v(e,l)},p(a,n){n&2&&t!==(t=pe(a[18].createdAt)+"")&&K(l,t)},d(a){a&&_(e)}}}function Re(s){var N,b,u;let e,t,l,a,n,f,c,p,m,o=s[18].rating&&ve(s),d=s[18].message&&be(s),r=((b=(N=s[18])==null?void 0:N.images)==null?void 0:b.length)&&we(s),h=((u=s[18].user)==null?void 0:u.firstName)&&Pe(s),g=s[18].createdAt&&Ne(s);return{c(){e=A("div"),o&&o.c(),t=z(),l=A("div"),d&&d.c(),a=z(),r&&r.c(),n=z(),f=A("div"),h&&h.c(),c=z(),g&&g.c(),p=z(),this.h()},l(i){e=y(i,"DIV",{class:!0});var M=D(e);o&&o.l(M),t=$(M),l=y(M,"DIV",{class:!0});var R=D(l);d&&d.l(R),a=$(R),r&&r.l(R),n=$(R),f=y(R,"DIV",{class:!0});var L=D(f);h&&h.l(L),c=$(L),g&&g.l(L),L.forEach(_),R.forEach(_),p=$(M),M.forEach(_),this.h()},h(){E(f,"class","flex flex-wrap items-center gap-1 text-zinc-500 text-xs"),E(l,"class","flex-1 flex flex-col gap-1 max-w-max"),E(e,"class","mb-5 flex items-start gap-4")},m(i,M){V(i,e,M),o&&o.m(e,null),v(e,t),v(e,l),d&&d.m(l,null),v(l,a),r&&r.m(l,null),v(l,n),v(l,f),h&&h.m(f,null),v(f,c),g&&g.m(f,null),v(e,p),m=!0},p(i,M){var R,L,G;i[18].rating?o?o.p(i,M):(o=ve(i),o.c(),o.m(e,t)):o&&(o.d(1),o=null),i[18].message?d?d.p(i,M):(d=be(i),d.c(),d.m(l,a)):d&&(d.d(1),d=null),(L=(R=i[18])==null?void 0:R.images)!=null&&L.length?r?(r.p(i,M),M&2&&F(r,1)):(r=we(i),r.c(),F(r,1),r.m(l,n)):r&&(ce(),Y(r,1,1,()=>{r=null}),oe()),(G=i[18].user)!=null&&G.firstName?h?h.p(i,M):(h=Pe(i),h.c(),h.m(f,c)):h&&(h.d(1),h=null),i[18].createdAt?g?g.p(i,M):(g=Ne(i),g.c(),g.m(f,null)):g&&(g.d(1),g=null)},i(i){m||(F(r),m=!0)},o(i){Y(r),m=!1},d(i){i&&_(e),o&&o.d(),d&&d.d(),r&&r.d(),h&&h.d(),g&&g.d()}}}function Ie(s){let e,t=`<img src="${Ue}" alt="loading" class="h-auto w-5 object-contain object-center"/>`;return{c(){e=A("div"),e.innerHTML=t,this.h()},l(l){e=y(l,"DIV",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-mbrmsw"&&(e.innerHTML=t),this.h()},h(){E(e,"class","flex items-center justify-center p-6")},m(l,a){V(l,e,a)},d(l){l&&_(e)}}}function Se(s){let e,t="<i>~ You have seen all the reviews ~</i>";return{c(){e=A("p"),e.innerHTML=t,this.h()},l(l){e=y(l,"P",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-kdkvxo"&&(e.innerHTML=t),this.h()},h(){E(e,"class","text-zinc-500 p-4 text-center")},m(l,a){V(l,e,a)},d(l){l&&_(e)}}}function et(s){var o,d,r,h,g,N,b;let e,t,l,a,n,f;const c=[s[8]];let p={};for(let u=0;u<c.length;u+=1)p=Ve(p,c[u]);e=new Ye({props:p}),l=new Ge({props:{cart:(d=(o=s[7])==null?void 0:o.data)==null?void 0:d.cart,me:(h=(r=s[7])==null?void 0:r.data)==null?void 0:h.me,productName:(g=s[0].product)==null?void 0:g.name,url:(b=(N=s[7])==null?void 0:N.url)==null?void 0:b.href,store:s[7].data.store,$$slots:{default:[Xe]},$$scope:{ctx:s}}});let m=s[2]&&ge(s);return{c(){re(e.$$.fragment),t=z(),re(l.$$.fragment),a=z(),m&&m.c(),n=fe()},l(u){ae(e.$$.fragment,u),t=$(u),ae(l.$$.fragment,u),a=$(u),m&&m.l(u),n=fe()},m(u,i){se(e,u,i),V(u,t,i),se(l,u,i),V(u,a,i),m&&m.m(u,i),V(u,n,i),f=!0},p(u,[i]){var L,G,J,S,j,C,P;const M=i&256?ze(c,[Le(u[8])]):{};e.$set(M);const R={};i&128&&(R.cart=(G=(L=u[7])==null?void 0:L.data)==null?void 0:G.cart),i&128&&(R.me=(S=(J=u[7])==null?void 0:J.data)==null?void 0:S.me),i&1&&(R.productName=(j=u[0].product)==null?void 0:j.name),i&128&&(R.url=(P=(C=u[7])==null?void 0:C.url)==null?void 0:P.href),i&128&&(R.store=u[7].data.store),i&16777348&&(R.$$scope={dirty:i,ctx:u}),l.$set(R),u[2]?m?(m.p(u,i),i&4&&F(m,1)):(m=ge(u),m.c(),F(m,1),m.m(n.parentNode,n)):m&&(ce(),Y(m,1,1,()=>{m=null}),oe())},i(u){f||(F(e.$$.fragment,u),F(l.$$.fragment,u),F(m),f=!0)},o(u){Y(e.$$.fragment,u),Y(l.$$.fragment,u),Y(m),f=!1},d(u){u&&(_(t),_(a),_(n)),le(e,u),le(l,u),m&&m.d(u)}}}function tt(s,e,t){var R,L,G,J;let l;je(s,qe,S=>t(7,l=S));let{data:a}=e,n={title:"All Reviews",description:"All Reviews"};const{productReviews:f}=a;let c=l.url.searchParams.get("brandId"),p=l.url.searchParams.get("type"),m=[],o=0,d=1,r=!1,h=[],g=!1,N=[];Be(()=>{new IntersectionObserver(j=>{j[0].intersectionRatio<=0||b()}).observe(document.querySelector(".more"))});async function b(){var S,j,C,P,x,H,T,w,B,I,U,Q,X,W,Z;if(!g){let ee=d+1;l.url.searchParams.delete("page"),l.url.searchParams.toString();try{t(3,r=!0);const k=await ye.fetchProductReviews({page:ee,brandIc:c,slug:a.slug,origin:(S=l==null?void 0:l.data)==null?void 0:S.origin,storeId:l.data.storeId}),te=p==="product_review";(C=(j=k==null?void 0:k.product)==null?void 0:j.data)!=null&&C.length||(x=(P=k==null?void 0:k.brand)==null?void 0:P.data)!=null&&x.length?te&&((T=(H=k==null?void 0:k.product)==null?void 0:H.data)!=null&&T.length)?(t(1,m=(B=f.product)==null?void 0:B.data.concat((w=k==null?void 0:k.product)==null?void 0:w.data)),t(2,o=(I=k.product)==null?void 0:I.count)):(Q=(U=k==null?void 0:k.brand)==null?void 0:U.data)!=null&&Q.length&&(t(1,m=(W=f.brand)==null?void 0:W.data.concat((X=k==null?void 0:k.brand)==null?void 0:X.data)),t(2,o=(Z=k.brand)==null?void 0:Z.count)):t(5,g=!0),t(0,a.err=k!=null&&k.estimatedTotalHits?null:"No result Not Found",a),d=d+1}catch(k){Ce(k,"error")}finally{t(3,r=!1)}}}const u=(S,j)=>{t(6,N=S.images.map(C=>({createdAt:S.createdAt,image:C,message:S.message,product:S.product,rating:S.rating,user:S.user})).flat()),t(4,h[j]=!0,h)},i=(S,j)=>u(S,j),M=S=>t(4,h[S]=!1,h);return s.$$set=S=>{"data"in S&&t(0,a=S.data)},p==="product_review"?(t(1,m=(R=f.product)==null?void 0:R.data),t(2,o=(L=f.product)==null?void 0:L.count)):(t(1,m=(G=f.brand)==null?void 0:G.data),t(2,o=(J=f.brand)==null?void 0:J.count)),[a,m,o,r,h,g,N,l,n,p,u,i,M]}class Et extends Te{constructor(e){super(),$e(this,e,tt,et,Me,{data:0})}}export{Et as component,Pt as universal};
