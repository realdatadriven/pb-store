import{N as fe,X as ve,s as be,d as y,y as _e,v as L,i as z,b as p,l as K,t as ge,a as m,c as k,e as M,g as J,f as R,w as X,k as E,m as q,x as G,o as ye,z as he,p as ke,a0 as Ee,a1 as Ce,S as Pe,a2 as we}from"./ufOp95kZ.js";import{n as De,l as Ie,S as Se,i as Te,d as Ae,t as Oe,a as Ne,m as Ve,b as je,e as xe}from"./DNCcOagt.js";import{e as ce,u as Be,d as Re}from"./DRjDb-W4.js";import{e as qe}from"./0O3gG8xD.js";import{w as Ue,g as Me}from"./D3JaxPbd.js";import{p as ze}from"./BpHj9z-n.js";import{t as Fe}from"./DhmAwd_b.js";import{P as Ye}from"./CPq52TI4.js";function pe(n){return Object.prototype.toString.call(n)==="[object Date]"}function le(n,t){if(n===t||n!==n)return()=>n;const e=typeof n;if(e!==typeof t||Array.isArray(n)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const l=t.map((s,r)=>le(n[r],s));return s=>l.map(r=>r(s))}if(e==="object"){if(!n||!t)throw new Error("Object cannot be null");if(pe(n)&&pe(t)){n=n.getTime(),t=t.getTime();const r=t-n;return o=>new Date(n+o*r)}const l=Object.keys(t),s={};return l.forEach(r=>{s[r]=le(n[r],t[r])}),r=>{const o={};return l.forEach(v=>{o[v]=s[v](r)}),o}}if(e==="number"){const l=t-n;return s=>n+s*l}throw new Error(`Cannot interpolate ${e} values`)}function Xe(n,t={}){const e=Ue(n);let l,s=n;function r(o,v){if(n==null)return e.set(n=o),Promise.resolve();s=o;let b=l,A=!1,{delay:O=0,duration:u=400,easing:P=ve,interpolate:S=le}=fe(fe({},t),v);if(u===0)return b&&(b.abort(),b=null),e.set(n=s),Promise.resolve();const c=De()+O;let T;return l=Ie(f=>{if(f<c)return!0;A||(T=S(n,o),typeof u=="function"&&(u=u(n,o)),A=!0),b&&(b.abort(),b=null);const C=f-c;return C>u?(e.set(n=o),!1):(e.set(n=T(P(C/u))),!0)}),l.promise}return{set:r,update:(o,v)=>r(o(s,n),v),subscribe:e.subscribe}}function de(n,t,e){const l=n.slice();return l[23]=t[e].id,l[24]=t[e].value,l[26]=e,l}function me(n,t){let e,l,s,r,o,v,b;function A(...u){return t[17](t[26],...u)}function O(...u){return t[18](t[26],...u)}return{key:n,first:null,c(){e=E("input"),this.h()},l(u){e=k(u,"INPUT",{id:!0,class:!0,type:!0,maxlength:!0,key:!0}),this.h()},h(){m(e,"id",l="otpbox_"+t[23].toString()),m(e,"class","w-12 h-12 text-center border focus:outline-none focus:border-zinc-500 focus:ring-1 ring-zinc-800 rounded svelte-1ci1a2q"),m(e,"type","number"),m(e,"maxlength","1"),e.value=s=t[24],e.autofocus=r=t[26]===0,m(e,"key",o=t[23]),this.first=e},m(u,P){z(u,e,P),t[26]===0&&e.focus(),v||(b=[K(e,"input",A),K(e,"paste",t[2]),K(e,"keydown",O)],v=!0)},p(u,P){t=u,P&64&&l!==(l="otpbox_"+t[23].toString())&&m(e,"id",l),P&64&&s!==(s=t[24])&&e.value!==s&&(e.value=s),P&64&&r!==(r=t[26]===0)&&(e.autofocus=r),P&64&&o!==(o=t[23])&&m(e,"key",o)},d(u){u&&y(e),v=!1,_e(b)}}}function Ge(n){let t,e="RESEND OTP",l,s;return{c(){t=E("button"),t.textContent=e,this.h()},l(r){t=k(r,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1e256qw"&&(t.textContent=e),this.h()},h(){m(t,"type","button"),m(t,"class","font-bold text-primary-500 focus:outline-none hover:text-primary-700")},m(r,o){z(r,t,o),l||(s=K(t,"click",n[11]),l=!0)},p:he,d(r){r&&y(t),l=!1,s()}}}function He(n){let t,e,l="Resend OTP in",s,r,o,v,b,A=":",O,u,P,S,c="seconds";function T(g,h){return g[3]<10?Ke:Je}let f=T(n),C=f(n);function F(g,h){return g[7]<10?Qe:Le}let N=F(n),w=N(n);return{c(){t=E("div"),e=E("span"),e.textContent=l,s=q(),r=E("p"),o=E("span"),C.c(),v=q(),b=E("span"),b.textContent=A,O=q(),u=E("span"),w.c(),P=q(),S=E("span"),S.textContent=c,this.h()},l(g){t=k(g,"DIV",{class:!0});var h=M(t);e=k(h,"SPAN",{"data-svelte-h":!0}),J(e)!=="svelte-5kjw95"&&(e.textContent=l),s=R(h),r=k(h,"P",{class:!0});var j=M(r);o=k(j,"SPAN",{});var Y=M(o);C.l(Y),Y.forEach(y),v=R(j),b=k(j,"SPAN",{"data-svelte-h":!0}),J(b)!=="svelte-5vnx5k"&&(b.textContent=A),O=R(j),u=k(j,"SPAN",{});var x=M(u);w.l(x),x.forEach(y),j.forEach(y),P=R(h),S=k(h,"SPAN",{"data-svelte-h":!0}),J(S)!=="svelte-1isxqch"&&(S.textContent=c),h.forEach(y),this.h()},h(){m(r,"class","flex items-center justify-center"),m(t,"class","mx-auto flex max-w-max items-center gap-1")},m(g,h){z(g,t,h),p(t,e),p(t,s),p(t,r),p(r,o),C.m(o,null),p(r,v),p(r,b),p(r,O),p(r,u),w.m(u,null),p(t,P),p(t,S)},p(g,h){f===(f=T(g))&&C?C.p(g,h):(C.d(1),C=f(g),C&&(C.c(),C.m(o,null))),N===(N=F(g))&&w?w.p(g,h):(w.d(1),w=N(g),w&&(w.c(),w.m(u,null)))},d(g){g&&y(t),C.d(),w.d()}}}function Je(n){let t;return{c(){t=G(n[3])},l(e){t=X(e,n[3])},m(e,l){z(e,t,l)},p(e,l){l&8&&L(t,e[3])},d(e){e&&y(t)}}}function Ke(n){let t,e;return{c(){t=G("0"),e=G(n[3])},l(l){t=X(l,"0"),e=X(l,n[3])},m(l,s){z(l,t,s),z(l,e,s)},p(l,s){s&8&&L(e,l[3])},d(l){l&&(y(t),y(e))}}}function Le(n){let t;return{c(){t=G(n[7])},l(e){t=X(e,n[7])},m(e,l){z(e,t,l)},p(e,l){l&128&&L(t,e[7])},d(e){e&&y(t)}}}function Qe(n){let t,e;return{c(){t=G("0"),e=G(n[7])},l(l){t=X(l,"0"),e=X(l,n[7])},m(l,s){z(l,t,s),z(l,e,s)},p(l,s){s&128&&L(e,l[7])},d(l){l&&(y(t),y(e))}}}function We(n){let t;return{c(){t=G("VERIFY")},l(e){t=X(e,"VERIFY")},m(e,l){z(e,t,l)},d(e){e&&y(t)}}}function Ze(n){let t,e,l,s="Enter the OTP sent to",r,o,v,b=(n[1]||"No phone no found")+"",A,O,u,P="Change",S,c,T,f=[],C=new Map,F,N,w,g,h,j,Y,x,Q="Didn't receive the OTP?",a,d,D,V,W,H,te,re,Z=ce(n[6]);const oe=i=>i[23];for(let i=0;i<Z.length;i+=1){let _=de(n,Z,i),I=oe(_);C.set(I,f[i]=me(I,_))}function se(i,_){return(i[3]||i[7])&&(i[3]>=0||i[7]>=0)?He:Ge}let $=se(n),U=$(n);return V=new Ye({props:{type:"submit",loading:n[0],disabled:n[5]||n[0],class:"w-full",$$slots:{default:[We]},$$scope:{ctx:n}}}),{c(){t=E("div"),e=E("div"),l=E("div"),l.textContent=s,r=q(),o=E("div"),v=E("b"),A=G(b),O=q(),u=E("button"),u.textContent=P,S=q(),c=E("form"),T=E("div");for(let i=0;i<f.length;i+=1)f[i].c();F=q(),N=E("input"),g=q(),h=E("input"),Y=q(),x=E("p"),x.textContent=Q,a=q(),d=E("div"),U.c(),D=q(),xe(V.$$.fragment),this.h()},l(i){t=k(i,"DIV",{});var _=M(t);e=k(_,"DIV",{class:!0});var I=M(e);l=k(I,"DIV",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-3eu1wm"&&(l.textContent=s),r=R(I),o=k(I,"DIV",{class:!0});var ee=M(o);v=k(ee,"B",{});var ae=M(v);A=X(ae,b),ae.forEach(y),O=R(ee),u=k(ee,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(u)!=="svelte-n3tg4k"&&(u.textContent=P),ee.forEach(y),I.forEach(y),S=R(_),c=k(_,"FORM",{action:!0,method:!0,class:!0,id:!0});var B=M(c);T=k(B,"DIV",{class:!0});var ie=M(T);for(let ne=0;ne<f.length;ne+=1)f[ne].l(ie);ie.forEach(y),F=R(B),N=k(B,"INPUT",{type:!0,name:!0}),g=R(B),h=k(B,"INPUT",{type:!0,name:!0}),Y=R(B),x=k(B,"P",{class:!0,"data-svelte-h":!0}),J(x)!=="svelte-1711ra3"&&(x.textContent=Q),a=R(B),d=k(B,"DIV",{class:!0});var ue=M(d);U.l(ue),ue.forEach(y),D=R(B),je(V.$$.fragment,B),B.forEach(y),_.forEach(y),this.h()},h(){m(l,"class","text-sm"),m(u,"type","button"),m(u,"class","font-bold focus:outline-none cursor-pointer hover:text-blue-600"),m(o,"class","flex gap-2 text-xs"),m(e,"class","mb-5 flex flex-col items-center justify-center gap-1 text-center"),m(T,"class","mb-5 flex gap-x-2"),m(N,"type","hidden"),m(N,"name","phone"),N.value=w=n[1]||null,m(h,"type","hidden"),m(h,"name","otp"),h.value=j=n[4]||null,m(x,"class","mb-2"),m(d,"class","mb-5 text-sm"),m(c,"action","/auth/login?/verifyOtp"),m(c,"method","POST"),m(c,"class","mb-8 flex flex-col items-center justify-center text-center"),m(c,"id","otp-form")},m(i,_){z(i,t,_),p(t,e),p(e,l),p(e,r),p(e,o),p(o,v),p(v,A),p(o,O),p(o,u),p(t,S),p(t,c),p(c,T);for(let I=0;I<f.length;I+=1)f[I]&&f[I].m(T,null);p(c,F),p(c,N),p(c,g),p(c,h),p(c,Y),p(c,x),p(c,a),p(c,d),U.m(d,null),p(c,D),Ve(V,c,null),H=!0,te||(re=[K(u,"click",n[16]),ge(W=qe.call(null,c,n[19]))],te=!0)},p(i,[_]){(!H||_&2)&&b!==(b=(i[1]||"No phone no found")+"")&&L(A,b),_&12356&&(Z=ce(i[6]),f=Be(f,_,oe,1,i,Z,C,T,Re,me,null,de)),(!H||_&2&&w!==(w=i[1]||null))&&(N.value=w),(!H||_&16&&j!==(j=i[4]||null))&&(h.value=j),$===($=se(i))&&U?U.p(i,_):(U.d(1),U=$(i),U&&(U.c(),U.m(d,null)));const I={};_&1&&(I.loading=i[0]),_&33&&(I.disabled=i[5]||i[0]),_&134217728&&(I.$$scope={dirty:_,ctx:i}),V.$set(I),W&&Pe(W.update)&&_&64&&W.update.call(null,i[19])},i(i){H||(Ne(V.$$.fragment,i),H=!0)},o(i){Oe(V.$$.fragment,i),H=!1},d(i){i&&y(t);for(let _=0;_<f.length;_+=1)f[_].d();U.d(),Ae(V),te=!1,_e(re)}}}function $e(n,t,e){let l,s,r,o,v=he,b=()=>(v(),v=Ee(l,a=>e(15,o=a)),l),A;ye(n,ze,a=>e(21,A=a)),n.$$.on_destroy.push(()=>v());const O=ke();let{loading:u}=t,{phone:P}=t,{resendAfter:S}=t,c=null,T=!0,f=[{id:0,value:""},{id:1,value:""},{id:2,value:""},{id:3,value:""}],C=A.url.searchParams.get("ref");setInterval(()=>{o>0&&we(l,o--,o)},1e3);function F(){e(6,f=[{id:0,value:""},{id:1,value:""},{id:2,value:""},{id:3,value:""}]),e(4,c=null),O("resend",P)}const N=async a=>{a.preventDefault();const D=(a.clipboardData||window.clipboardData).getData("text");e(6,f=[{id:0,value:D[0]},{id:1,value:D[1]},{id:2,value:D[2]},{id:3,value:D[3]}]),h()};function w(a,d){e(6,f[a].value=d.target.value,f);const D=d.target.value;if(D.length>1?e(6,f[a].value=D[D.length-1],f):e(6,f[a].value=D,f),a<f.length-1&&D){const V=d.target.nextElementSibling;V&&V.focus()}else if(!D&&a>0){const V=d.target.previousElementSibling;V&&V.focus()}h()}function g(a,d){if((d.key==="Backspace"||d.key==="Delete")&&a>0){const D=d.target.previousElementSibling;D&&(e(6,f[a].value="",f),D.value="",D.focus()),d.preventDefault(),h()}}async function h(){const a=f.map(d=>d.value);e(4,c=a.join("")),(c==null?void 0:c.length)===4&&(e(5,T=!1),await Ce(),document.querySelector("#otp-form").dispatchEvent(new Event("submit")))}const j=()=>O("changeNumber"),Y=(a,d)=>w(a,d),x=(a,d)=>g(a,d),Q=()=>async({result:a})=>{var d;(a==null?void 0:a.status)===200?Me(C||"/"):(Fe((d=a==null?void 0:a.data)==null?void 0:d.message,"error"),e(6,f=[{id:0,value:""},{id:1,value:""},{id:2,value:""},{id:3,value:""}]),document.getElementById("otpbox_0").focus())};return n.$$set=a=>{"loading"in a&&e(0,u=a.loading),"phone"in a&&e(1,P=a.phone),"resendAfter"in a&&e(14,S=a.resendAfter)},n.$$.update=()=>{n.$$.dirty&16384&&b(e(8,l=Xe(S))),n.$$.dirty&32768&&e(3,s=Math.floor(o/60)),n.$$.dirty&32776&&e(7,r=Math.floor(o-s*60)),n.$$.dirty&32768},[u,P,N,s,c,T,f,r,l,O,C,F,w,g,S,o,j,Y,x,Q]}class it extends Se{constructor(t){super(),Te(this,t,$e,Ze,be,{loading:0,phone:1,resendAfter:14,handlePaste:2})}get handlePaste(){return this.$$.ctx[2]}}export{it as V};
