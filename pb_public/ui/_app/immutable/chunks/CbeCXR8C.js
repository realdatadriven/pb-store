import"./DNCcOagt.js";import{q as d,g as v}from"./C-49iYB-.js";function a(n,c){d.update(o=>[...o,{type:"track",params:[n,c]}])}function t(n,c){c.send_to||delete c.send_to,v.update(o=>[...o,{type:"event",event:n,data:c}])}const k=(n,c)=>{var s,i,u;c||(c={}),c.items=c.items||[];const o=c.items.map(e=>{var _,p;return e.discount=e.discount||e.coupon||{},{item_id:e.sku?e.sku:e._id,item_name:e.name,affiliation:e.vendorBusinessName,item_brand:e.brandName,item_category:e.categoryName,price:e.price,quantity:e.qty,coupon:(_=e.discount)==null?void 0:_.code,currency:"INR",discount:(p=e.discount)==null?void 0:p.amount,savings:e.savings,index:0}}),r={currency:"INR",value:c.total,items:o};switch(n){case"add_to_cart":t("add_to_cart",r),a("add_to_cart",r);break;case"view_cart":t("view_cart",r),a("view_cart",r);break;case"remove_from_cart":t("remove_from_cart",r),a("remove_from_cart",r);break;case"begin_checkout":t("begin_checkout",r),a("begin_checkout",r);break;case"purchase":const e={transaction_id:c.orderNo,affiliation:(s=o[0])==null?void 0:s.vendorBusinessName,value:c.total,tax:c.tax,shipping:(i=c.shipping)==null?void 0:i.charge,currency:"INR",coupon:(u=c.coupon)==null?void 0:u.code,items:o};t("purchase",e),a("purchase",e);break}};export{k as f};
